<!DOCTYPE html>
<html lang="DA">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bistro Babushka</title>
    <link rel="stylesheet" href="style.css">

    <link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
</head>

<body>

    <div id="popup">
        <div id="popupindhold">
            <button class="close-content">Close</button>
            <h2 class="info" data-navn> </h2>
            <img src="" alt="" class="infoimg" data-popupBillede>


            <details open>
                <p class="info" data-langbeskrivelse></p>
                <p> Pris: <span class="info" data-pris> </span> ,-</p>
            </details>
        </div>
    </div>



    <header>
        <h1 class="title"> BISTRO BABUSHKA </h1>
        <nav>
            <button id="filter-alle"> Alle</button>
            <button id="filter-forretter"> Forretter</button>
            <button id="filter-hovedretter"> Hovedretter</button>
            <button id="filter-sideorders"> Sideorders</button>
            <button id="filter-desserter"> Desserter</button>
            <button id="filter-drikkevarer"> Drikkevarer</button>
        </nav>
    </header>


    <main>
        <h1 id="overskrift" data-overskrift> Menu </h1>

        <div class="menukort" data-menukort> </div>
    </main>

    <template class="menutemplate" data-menutemplate>
        <artice class="food" data-food>
        <h2 class="navn" data-navn> </h2>
        <img class="billede" src="" alt="" data-billede>
        <p class="kortbeskrivelse" data-kortbeskrivelse></p>
        <div class="pris" data-pris></div>
        </artice>
    </template>





    <footer>
        <section>
            <adress>Adresse: Grønnegade 97 1234 København K <br></adress>
            <aside> Åbningstider: <br> Mandag-Fredag 10.30- 22.00 <br> Lørdag 12:23.00</aside>
        </section>
    </footer>



    <script>
        let menukort = [];


        document.addEventListener("DOMContentLoaded", hentJson);

        async function hentJson() {
            let jsonData = await fetch("menu.json");
            menukort = await jsonData.json();
            visMenukort(menukort, "Menu");
            lavFiltre();
        }


        function visMenukort(menukort, overskrift) {

            let temp = document.querySelector("[data-menutemplate]");
            let dest = document.querySelector("[data-menukort]");
            dest.innerHTML = "";
            document.querySelector("#overskrift").textContent = overskrift;

            menukort.forEach(madret => {
                let klon = temp.cloneNode(true).content;
                klon.querySelector("[data-navn]").textContent = madret.navn;
                klon.querySelector("[data-kortbeskrivelse]").textContent = madret.kortbeskrivelse;
                klon.querySelector("[data-pris]").textContent = "Pris: " + madret.pris + " kr.";


                klon.querySelector("[data-billede]").setAttribute("src", "imgs/small/" + madret.billede + "-sm.jpg");
                klon.querySelector("[data-billede]").alt = "billede af " + madret.navn;


                klon.querySelector(".food").addEventListener("click", () => {
                    location.href = "single.html?id=" + madret.id;
                })

                dest.appendChild(klon);
            });

        }



        function lavFiltre() {

            //kald visRetter med de nye arrays

            document.querySelector(".title").addEventListener("click", () => {
                location.href = "index.html";
            });

            document.querySelector("#filter-alle").addEventListener("click", () => {
                location.href = "index.html";
            });

            document.querySelector("#filter-forretter").addEventListener("click", () => {
                location.href = "kategori.html?kategori=forretter";

            });

            document.querySelector("#filter-hovedretter").addEventListener("click", () => {
                location.href = "kategori.html?kategori=hovedretter";
            });

 document.querySelector("#filter-sideorders").addEventListener("click", () => { location.href = "kategori.html?kategori=sideorders"; });

            document.querySelector("#filter-desserter").addEventListener("click", () => {
                location.href = "kategori.html?kategori=desserter";

            });

            document.querySelector("#filter-drikkevarer").addEventListener("click", () => {
                location.href = "kategori.html?kategori=drikkevarer";

            });
        }
    </script>


</body>

</html>
